
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../optvl_api/">
      
      
        <link rel="next" href="../optvl_changes_from_avl/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Migration Guide: OptVL v1 to v2 - OptVL Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-FRCNFMY9DQ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-FRCNFMY9DQ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-FRCNFMY9DQ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migration-guide-optvl-v1-to-v2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OptVL Docs" class="md-header__button md-logo" aria-label="OptVL Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OptVL Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migration Guide: OptVL v1 to v2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/joanibal/OptVL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    optvl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OptVL Docs" class="md-nav__button md-logo" aria-label="OptVL Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    OptVL Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/joanibal/OptVL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    optvl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../making_a_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building a run script
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optvl_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison of Interface with AVL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Migration Guide: OptVL v1 to v2
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration Guide: OptVL v1 to v2
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary-of-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary of Changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#force-coefficient-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Force Coefficient Changes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Force Coefficient Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-to-get_total_forces" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to get_total_forces()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stability-derivative-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stability Derivative Changes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stability Derivative Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-to-get_stab_derivs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to get_stab_derivs()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-body-axis-derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      
        New Body Axis Derivatives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes-for-variables-and-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Changes for Variables and Constraints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Changes for Variables and Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-flight-condition-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Flight Condition Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-control-surface-deflections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Control Surface Deflections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Constraints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avl-v352-source-code-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        AVL v3.52 Source Code Updates
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-update-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Update Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optvl_changes_from_avl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changes in OptVL relative to AVL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alpha_cl_sweep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running alpha and CL sweeps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modal_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modal Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parameter_sweeps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modifying Geometry for Parameter Sweeps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Optimization
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimization_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimization Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimization_setup_scipy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimizing with SciPy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimization_setup_om/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimizing with OpenMDAO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../planform_optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Planform optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Visualization
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Visualization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../viz_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sectional_data_viz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sectional Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../making_a_movie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to make a movie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_development_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Development Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../building_optvl_locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building OptVL Locally
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pyavl_changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changes from pyAVL to OptVL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Code Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Code Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    utils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/check_surface_dict/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    check_surface_dict
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/airfoil_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    airfoil_utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optvl_class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    optvl_class
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/om_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    om_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary-of-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary of Changes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#force-coefficient-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Force Coefficient Changes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Force Coefficient Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-to-get_total_forces" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to get_total_forces()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stability-derivative-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stability Derivative Changes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stability Derivative Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-to-get_stab_derivs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to get_stab_derivs()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-body-axis-derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      
        New Body Axis Derivatives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes-for-variables-and-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Changes for Variables and Constraints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Changes for Variables and Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-flight-condition-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Flight Condition Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-control-surface-deflections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Control Surface Deflections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Constraints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avl-v352-source-code-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        AVL v3.52 Source Code Updates
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-update-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Update Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="migration-guide-optvl-v1-to-v2">Migration Guide: OptVL v1 to v2<a class="headerlink" href="#migration-guide-optvl-v1-to-v2" title="Permanent link">&para;</a></h1>
<p>This guide outlines the breaking changes introduced in OptVL v2 and provides instructions for updating your code.
OptVL v2 includes improvements to AVL consistency, API clarity, and additional functionality. </p>
<h2 id="summary-of-changes">Summary of Changes<a class="headerlink" href="#summary-of-changes" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Renamed force and derivative coefficients</strong> for consistency with AVL and to distinguish between body axis and stability axis</li>
<li><strong>Introduced body axis derivatives</strong> via a new method <code>get_body_axis_derivs()</code></li>
<li><strong>Updated API</strong> for setting variables, control deflections, and constraints</li>
<li><strong>Upgraded to AVL v3.52 source code</strong> with updated physics models</li>
</ol>
<!-- 5. **Improved testing infrastructure** for generating reference data directly from AVL -->

<h2 id="force-coefficient-changes">Force Coefficient Changes<a class="headerlink" href="#force-coefficient-changes" title="Permanent link">&para;</a></h2>
<h3 id="changes-to-get_total_forces">Changes to <code>get_total_forces()</code><a class="headerlink" href="#changes-to-get_total_forces" title="Permanent link">&para;</a></h3>
<p>The moment coefficient naming has been updated to be more consistent with AVL conventions and to clearly distinguish between body axis and stability axis frames.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Old Key</th>
<th style="text-align: center;">New Key</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">CR BA</td>
<td style="text-align: center;">Cl</td>
<td style="text-align: center;">roll moment coef. (body frame)</td>
</tr>
<tr>
<td style="text-align: center;">CM</td>
<td style="text-align: center;">Cm</td>
<td style="text-align: center;">pitch moment coef. (body frame)</td>
</tr>
<tr>
<td style="text-align: center;">CN BA</td>
<td style="text-align: center;">Cn</td>
<td style="text-align: center;">yaw moment coef. (body frame)</td>
</tr>
<tr>
<td style="text-align: center;">CR SA</td>
<td style="text-align: center;">Cl'</td>
<td style="text-align: center;">roll moment coef. (stability frame)</td>
</tr>
<tr>
<td style="text-align: center;">CN SA</td>
<td style="text-align: center;">Cn'</td>
<td style="text-align: center;">yaw moment coef. (stability frame)</td>
</tr>
</tbody>
</table>
<p><strong>example:</strong></p>
<p>old code
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">forces</span> <span class="o">=</span> <span class="n">ovl</span><span class="o">.</span><span class="n">get_total_forces</span><span class="p">()</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">roll_moment_body</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;CR BA&quot;</span><span class="p">]</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">pitch_moment</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;CM&quot;</span><span class="p">]</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">yaw_moment_body</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;CN BA&quot;</span><span class="p">]</span>
</span></code></pre></div>
new code
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># v2 code</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">forces</span> <span class="o">=</span> <span class="n">ovl</span><span class="o">.</span><span class="n">get_total_forces</span><span class="p">()</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">roll_moment_body</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;Cl&quot;</span><span class="p">]</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">pitch_moment</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;Cm&quot;</span><span class="p">]</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">yaw_moment_body</span> <span class="o">=</span> <span class="n">forces</span><span class="p">[</span><span class="s2">&quot;Cn&quot;</span><span class="p">]</span>
</span></code></pre></div></p>
<h2 id="stability-derivative-changes">Stability Derivative Changes<a class="headerlink" href="#stability-derivative-changes" title="Permanent link">&para;</a></h2>
<h3 id="changes-to-get_stab_derivs">Changes to <code>get_stab_derivs()</code><a class="headerlink" href="#changes-to-get_stab_derivs" title="Permanent link">&para;</a></h3>
<p>The stability derivatives now use the AVL notation for rotations around the stability axis (p', q', r'). </p>
<p><strong>v1 stability derivative keys:</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>alpha</th>
<th>beta</th>
<th>roll rate</th>
<th>pitch rate</th>
<th>yaw rate</th>
</tr>
</thead>
<tbody>
<tr>
<td>CL</td>
<td>dCL/dalpha</td>
<td>dCL/dbeta</td>
<td>dCL/droll rate</td>
<td>dCL/dpitch rate</td>
<td>dCL/dyaw rate</td>
</tr>
<tr>
<td>CD</td>
<td>dCD/dalpha</td>
<td>dCD/dbeta</td>
<td>dCD/droll rate</td>
<td>dCD/dpitch rate</td>
<td>dCD/dyaw rate</td>
</tr>
<tr>
<td>CY</td>
<td>dCY/dalpha</td>
<td>dCY/dbeta</td>
<td>dCY/droll rate</td>
<td>dCY/dpitch rate</td>
<td>dCY/dyaw rate</td>
</tr>
<tr>
<td>CR</td>
<td>dCR/dalpha</td>
<td>dCR/dbeta</td>
<td>dCR/droll rate</td>
<td>dCR/dpitch rate</td>
<td>dCR/dyaw rate</td>
</tr>
<tr>
<td>CM</td>
<td>dCM/dalpha</td>
<td>dCM/dbeta</td>
<td>dCM/droll rate</td>
<td>dCM/dpitch rate</td>
<td>dCM/dyaw rate</td>
</tr>
<tr>
<td>CN</td>
<td>dCN/dalpha</td>
<td>dCN/dbeta</td>
<td>dCN/droll rate</td>
<td>dCN/dpitch rate</td>
<td>dCN/dyaw rate</td>
</tr>
</tbody>
</table>
<p><strong>v2 stability derivative keys:</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>alpha</th>
<th>beta</th>
<th>p'</th>
<th>q'</th>
<th>r'</th>
</tr>
</thead>
<tbody>
<tr>
<td>CL</td>
<td>dCL/dalpha</td>
<td>dCL/dbeta</td>
<td>dCL/dp'</td>
<td>dCL/dq'</td>
<td>dCL/dr'</td>
</tr>
<tr>
<td>CD</td>
<td>dCD/dalpha</td>
<td>dCD/dbeta</td>
<td>dCD/dp'</td>
<td>dCD/dq'</td>
<td>dCD/dr'</td>
</tr>
<tr>
<td>CY</td>
<td>dCY/dalpha</td>
<td>dCY/dbeta</td>
<td>dCY/dp'</td>
<td>dCY/dq'</td>
<td>dCY/dr'</td>
</tr>
<tr>
<td>Cl'</td>
<td>dCl'/dalpha</td>
<td>dCl'/dbeta</td>
<td>dCl'/dp'</td>
<td>dCl'/dq'</td>
<td>dCl'/dr'</td>
</tr>
<tr>
<td>Cm</td>
<td>dCm/dalpha</td>
<td>dCm/dbeta</td>
<td>dCm/dp'</td>
<td>dCm/dq'</td>
<td>dCm/dr'</td>
</tr>
<tr>
<td>Cn'</td>
<td>dCn'/dalpha</td>
<td>dCn'/dbeta</td>
<td>dCn'/dp'</td>
<td>dCn'/dq'</td>
<td>dCn'/dr'</td>
</tr>
</tbody>
</table>
<p><strong>Migration example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># v1 code</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">derivs</span> <span class="o">=</span> <span class="n">ovl</span><span class="o">.</span><span class="n">get_stab_derivs</span><span class="p">()</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">roll_damping</span> <span class="o">=</span> <span class="n">derivs</span><span class="p">[</span><span class="s2">&quot;CR/roll rate&quot;</span><span class="p">]</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># v2 code</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">derivs</span> <span class="o">=</span> <span class="n">ovl</span><span class="o">.</span><span class="n">get_stab_derivs</span><span class="p">()</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">roll_damping</span> <span class="o">=</span> <span class="n">derivs</span><span class="p">[</span><span class="s2">&quot;Cl&#39;/p&#39;&quot;</span><span class="p">]</span>
</span></code></pre></div></p>
<h2 id="new-body-axis-derivatives">New Body Axis Derivatives<a class="headerlink" href="#new-body-axis-derivatives" title="Permanent link">&para;</a></h2>
<p>Version 2 introduces a new method <code>get_body_axis_derivs()</code> that provides derivatives with respect to body axis velocities and angular rates.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">body_derivs</span> <span class="o">=</span> <span class="n">ovl</span><span class="o">.</span><span class="n">get_body_axis_derivs</span><span class="p">()</span>
</span></code></pre></div>
<p>This method returns derivatives in the following format:</p>
<table>
<thead>
<tr>
<th></th>
<th>p</th>
<th>q</th>
<th>r</th>
<th>u</th>
<th>v</th>
<th>w</th>
</tr>
</thead>
<tbody>
<tr>
<td>CX</td>
<td>dCX/dp</td>
<td>dCX/dq</td>
<td>dCX/dr</td>
<td>dCX/du</td>
<td>dCX/dv</td>
<td>dCX/dw</td>
</tr>
<tr>
<td>CY</td>
<td>dCY/dp</td>
<td>dCY/dq</td>
<td>dCY/dr</td>
<td>dCY/du</td>
<td>dCY/dv</td>
<td>dCY/dw</td>
</tr>
<tr>
<td>CZ</td>
<td>dCZ/dp</td>
<td>dCZ/dq</td>
<td>dCZ/dr</td>
<td>dCZ/du</td>
<td>dCZ/dv</td>
<td>dCZ/dw</td>
</tr>
<tr>
<td>Cl</td>
<td>dCl/dp</td>
<td>dCl/dq</td>
<td>dCl/dr</td>
<td>dCl/du</td>
<td>dCl/dv</td>
<td>dCl/dw</td>
</tr>
<tr>
<td>Cm</td>
<td>dCm/dp</td>
<td>dCm/dq</td>
<td>dCm/dr</td>
<td>dCm/du</td>
<td>dCm/dv</td>
<td>dCm/dw</td>
</tr>
<tr>
<td>Cn</td>
<td>dCn/dp</td>
<td>dCn/dq</td>
<td>dCn/dr</td>
<td>dCn/du</td>
<td>dCn/dv</td>
<td>dCn/dw</td>
</tr>
</tbody>
</table>
<h2 id="api-changes-for-variables-and-constraints">API Changes for Variables and Constraints<a class="headerlink" href="#api-changes-for-variables-and-constraints" title="Permanent link">&para;</a></h2>
<p>The API for setting variables, control surface deflections, and constraints has been updated for clarity and consistency.</p>
<h3 id="setting-flight-condition-variables">Setting Flight Condition Variables<a class="headerlink" href="#setting-flight-condition-variables" title="Permanent link">&para;</a></h3>
<p>Use <code>set_variable()</code> to set angle of attack, sideslip angle, and angular rates:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># v2 syntax</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;beta&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;roll rate&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;pitch rate&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;yaw rate&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="setting-control-surface-deflections">Setting Control Surface Deflections<a class="headerlink" href="#setting-control-surface-deflections" title="Permanent link">&para;</a></h3>
<p>Use the dedicated <code>set_control_deflection()</code> method for control surfaces:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># v1 code - control surfaces mixed with flight variables</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;Elevator&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># v2 code - dedicated method for control surfaces</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_control_deflection</span><span class="p">(</span><span class="s2">&quot;Elevator&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_control_deflection</span><span class="p">(</span><span class="s2">&quot;Aileron&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_control_deflection</span><span class="p">(</span><span class="s2">&quot;Rudder&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="setting-constraints">Setting Constraints<a class="headerlink" href="#setting-constraints" title="Permanent link">&para;</a></h3>
<p>The <code>set_constraint()</code> method now requires all three parameters explicitly, the variable to change, the constraint variable and constraint value.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># v2 syntax - constraint variable is required</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;Elevator&quot;</span><span class="p">,</span> <span class="s2">&quot;Cm&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>  <span class="c1"># Trim elevator to achieve Cm = 0</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;CL&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>     <span class="c1"># Adjust alpha to achieve CL = 0.5</span>
</span></code></pre></div>
<p><strong>API changes example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># v1 code</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;Elevator&quot;</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">con_var</span><span class="o">=</span><span class="s2">&quot;CL&quot;</span><span class="p">)</span>  
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1"># v2 code</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_control_deflection</span><span class="p">(</span><span class="s2">&quot;Elevator&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="n">ovl</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;CL&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># All parameters explicitly required</span>
</span></code></pre></div></p>
<h2 id="avl-v352-source-code-updates">AVL v3.52 Source Code Updates<a class="headerlink" href="#avl-v352-source-code-updates" title="Permanent link">&para;</a></h2>
<p>OptVL v2 is based on AVL version 3.52, which multiple changes including:</p>
<ul>
<li>Updated physics models with different default vortex core radius calculations</li>
<li>New Core geometry file input to explicitly adjust the vortex cores of segments.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Slight Numerical Differences</p>
<p>Due to the updated physics models in AVL v3.52, you may observe small differences in analysis results compared to v1. These differences are generally minor but reflect improvements in the underlying AVL code.</p>
</div>
<h2 id="quick-update-checklist">Quick Update Checklist<a class="headerlink" href="#quick-update-checklist" title="Permanent link">&para;</a></h2>
<p>When migrating from v1 to v2, update your code as follows:</p>
<ul>
<li>Replace <code>"CR BA"</code> with <code>"Cl"</code> in <code>get_total_forces()</code> calls</li>
<li>Replace <code>"CM"</code> with <code>"Cm"</code> in <code>get_total_forces()</code> calls</li>
<li>Replace <code>"CN BA"</code> with <code>"Cn"</code> in <code>get_total_forces()</code> calls</li>
<li>Replace <code>"CR SA"</code> with <code>"Cl'"</code> in <code>get_total_forces()</code> calls</li>
<li>Replace <code>"CN SA"</code> with <code>"Cn'"</code> in <code>get_total_forces()</code> calls</li>
<li>Update stability derivative keys: <code>"roll rate"</code>  <code>"p'"</code>, <code>"pitch rate"</code>  <code>"q'"</code>, <code>"yaw rate"</code>  <code>"r'"</code></li>
<li>Replace moment coefficient keys in <code>get_stab_derivs()</code>: <code>"CR"</code>  <code>"Cl'"</code>, <code>"CM"</code>  <code>"Cm"</code>, <code>"CN"</code>  <code>"Cn'"</code></li>
<li>Use <code>set_control_deflection()</code> instead of <code>set_constraint()</code> for control surfaces</li>
<li>Use <code>set_variable()</code> instead of <code>set_constraint()</code> for flight condition variables</li>
<li>Ensure all three parameters are provided to <code>set_constraint()</code></li>
<li>Test your code and verify results are as expected (minor numerical differences may occur)</li>
</ul>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>